<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Front Sonar (Slow Scan â€¢ Optical Detail)</title>
  <style>
    body {
      margin: 0;
      background: #000;
      color: #0ff;
      font-family: 'Consolas', monospace;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }
    canvas {
      border-top: 2px solid #0ff;
      border-left: 2px solid #0ff;
      border-right: 2px solid #0ff;
      border-radius: 0 0 300px 300px;
      box-shadow: 0 0 20px #0ff;
      background: radial-gradient(circle at center, #001a1a 0%, #000 80%);
    }
    h1 {
      color: #0ff;
      font-weight: 400;
      margin-bottom: 10px;
      letter-spacing: 2px;
      text-shadow: 0 0 8px #0ff;
    }
  </style>
</head>
<body>
  <h1>ðŸ”µ Front Sonar Radar Simulation</h1>
  <canvas id="sonar" width="700" height="350"></canvas>

  <script>
    const canvas = document.getElementById("sonar");
    const ctx = canvas.getContext("2d");
    const W = canvas.width;
    const H = canvas.height;
    const CX = W / 2;
    const CY = H;
    const R = H - 10;

    let angle = 0;
    let direction = 1; // 1 = right, -1 = left
    const sweepSpeed = 1.5; // degrees per frame
    const targets = [];

    // Generate random targets
    for (let i = 0; i < 12; i++) {
      const a = Math.random() * Math.PI;
      const r = Math.random() * (R - 40);
      targets.push({ a, r, alpha: 1 });
    }

    function drawGrid() {
      ctx.strokeStyle = "rgba(0,255,255,0.1)";
      ctx.lineWidth = 1;
      for (let i = 1; i <= 5; i++) {
        ctx.beginPath();
        ctx.arc(CX, CY, (R / 5) * i, Math.PI, 0);
        ctx.stroke();
      }
      // Angle lines
      for (let i = -90; i <= 90; i += 15) {
        const rad = (i * Math.PI) / 180;
        ctx.beginPath();
        ctx.moveTo(CX, CY);
        ctx.lineTo(CX + R * Math.cos(rad), CY - R * Math.sin(rad));
        ctx.stroke();
      }
    }

    function drawBeam() {
      const rad = (angle * Math.PI) / 180;
      const grad = ctx.createRadialGradient(CX, CY, 0, CX, CY, R);
      grad.addColorStop(0, "rgba(0,255,255,0.1)");
      grad.addColorStop(1, "rgba(0,255,255,0)");
      ctx.fillStyle = grad;

      ctx.beginPath();
      ctx.moveTo(CX, CY);
      ctx.arc(CX, CY, R, Math.PI, rad, false);
      ctx.closePath();
      ctx.fill();

      // Center line
      ctx.strokeStyle = "rgba(0,255,255,0.8)";
      ctx.beginPath();
      ctx.moveTo(CX, CY);
      ctx.lineTo(CX + R * Math.cos(rad), CY - R * Math.sin(rad));
      ctx.stroke();
    }

    function drawTargets() {
      targets.forEach((t) => {
        const x = CX + t.r * Math.cos(t.a);
        const y = CY - t.r * Math.sin(t.a);

        const beamRad = (angle * Math.PI) / 180;
        const diff = Math.abs(beamRad - t.a);

        // detection zone ~ small angle tolerance
        if (diff < 0.05) t.alpha = 1;
        else t.alpha *= 0.98;

        if (t.alpha > 0.05) {
          ctx.beginPath();
          ctx.fillStyle = `rgba(0,255,255,${t.alpha})`;
          ctx.arc(x, y, 4, 0, Math.PI * 2);
          ctx.fill();
        }
      });
    }

    function animate() {
      ctx.clearRect(0, 0, W, H);
      drawGrid();
      drawTargets();
      drawBeam();

      angle += sweepSpeed * direction;
      if (angle >= 180) direction = -1;
      if (angle <= 0) direction = 1;

      requestAnimationFrame(animate);
    }

    animate();
  </script>
</body>
</html>
